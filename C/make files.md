- A Makefile (sentence cased), also called a descriptor file, is a file containing instructions for the [[Bash commands|terminal]].
- `make` is a program that reads instructions from a Makefile (by default).
- We need a file called Makefile to tell `make` what to do.
- Most often, a Makefile is implemented to tell `make` how to compile and link a program.
- The `make` utility automatically determines which pieces of a large program need to be recompiled, and issues commands to recompile them.
- A Makefile contains:
	- Rules
	- Macros
	- Suffix (or implicit rules)
- Makefiles **must** be indented using TAB characters.

A simple Makefile consists of rules with the following syntax:

```Bash
<target> : <prerequisites>
	<recipe>
```
Note: Every `<recipe>` must begin with a TAB character.

- A `<target>` is usually the name of a file that is generated by a program; examples of targets are executable or object files.
	- A target can also be the name of an action to carry out, such as `clean`.
- A `<prerequisite>` is a file that is used as input to create the target.
	- A target often depends on several files.
- A `<recipe>` is an action that make carries out. A recipe may have more than one command, either on the same line or each on its own line.

Example

![](https://i.imgur.com/RAtNL2I.png)

Another example:

Given three files in out directory:

![](https://i.imgur.com/7hNMUsW.png)

We could compile this collection of code by executing the `gcc` command:

![](https://i.imgur.com/CbffSMc.png)

Among other reasons, this approach is inefficient specially if we have many files to include in the compilation, as we would have to compile all the files (individually or at once) every time we change source code from one of the files. But we can create a makefile to compile only those files that were changed.

![](https://i.imgur.com/6EEo4o4.png)

In the example above, we use the `-f` option to read the file name `Makefile1` as a makefile (default name should be Makefile).

[More examples](https://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/).

# options

`make -f file`: Read the file named file as a makefile (default name should be Make).

[Make options](https://www.gnu.org/software/make/manual/html_node/Options-Summary.html)

[A Simple Makefile Tutorial](https://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/)